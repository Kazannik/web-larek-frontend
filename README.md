# Проектная работа "Веб-ларек"

_Интернет-магазин с товарами для веб-разработчиков — Web-ларёк. В магазине можно посмотреть каталог товаров, добавить товары в корзину и сделать заказ._

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```bash
npm install
npm run start
```

или

```bash
yarn
yarn start
```

## Сборка

```bash
npm run build
```

или

```bash
yarn build
```

## Основные возможности

Главная страница содержит каталог товаров, предоставляет доступ к детальной информации о товаре и к корзине с выбранными товарами. При нажатии на кнопку «Купить» товар добавляется в корзину, если не был добавлен в корзину раньше, при нажатии на кнопку «Убрать» товар удаляется из корзины.

Оформление товара состоит из последовательного ввода информации в двух модальных окнах. В первом окне производится выбор способа оплаты и ввод адреса доставки. Если адрес доставки не введён, появляется сообщение об ошибке. Во втором окне осуществляется ввод почты и телефона покупателя. Если одно из полей не заполнено, также появляется сообщение об ошибке. При нажатии на кнопку оплаты появляется сообщение об успешной оплате и товары удаляются из корзины.

## Примененные паттерны

В проекте применен паттерн MVP (Model-View-Presenter), который обеспечивает четкое разделение ответственностей между компонентами приложения и улучшает его поддерживаемость и масштабируемость. Каждый компонент выполняет свою четко определенную роль:

- Модель (Model): Отвечает за работу с данными приложения.
  Классы и интерфейсы: `ISmallProductCard`, `IProductCard`, `IProduct`, `IGallery`, `IBasket`, `IPayment`, `IContact`, `IOrder`, `IOrderFormError`.
- Представление (View): Отображает данные пользователю и взаимодействует с пользователем.
  Классы и интерфейсы: `ICard`, `IPage`.
- Представитель (Presenter): Связывает модель и представление, управляя взаимодействием между ними и логикой приложения.
  Классы: `ApiListResponse`, `ApiPostMethods`, `Api`,`EventEmitter`, `EventName`, `Subscriber`, `EmitterEvent`.

## Архитектура слоя данных

![image](web-larek-frontend.svg)

## Базовый код

### Класс `SmallProductCard`

> Отвечает за хранение основной информации о провукте.

Свойства:

- `id: string` - уникальный идентификатор товара;
- `title: string` - название товара;
- `price: number | null` - цена товара.

### Класс `ProductCard`

> Класс наследуется от класса [`SmallProductCard`](#класс-smallproductcard) и расширяет свийства данного класса.

Свойства:

- `id: string` - уникальный идентификатор товара (наследуется от класса [`SmallProductCard`](#класс-smallproductcard));
- `title: string` - название товара (наследуется от класса [`SmallProductCard`](#класс-smallproductcard));
- `price: number | null` - цена товара (наследуется от класса [`SmallProductCard`](#класс-smallproductcard));
- `category: string` - категория товара;
- `imageUrl: string` - ссылка на изображение товара.

### Класс `Product`

> Класс наследуется от класса [`ProductCard`](#класс-productcard) и расширяет свийства данного класса. Отвечает за хранение полной информации о продукте.

Свойства:

- `id: string` - уникальный идентификатор товара (наследуется от класса [`SmallProductCard`](#класс-smallproductcard));
- `title: string` - название товара (наследуется от класса [`SmallProductCard`](#класс-smallproductcard));
- `price: number | null` - цена товара (наследуется от класса [`SmallProductCard`](#класс-smallproductcard));
- `category: string` - категория товара (наследуется от класса [`ProductCard`](#класс-productcard));
- `imageUrl: string` - ссылка на изображение товара (наследуется от класса [`ProductCard`](#класс-productcard));
- `description: string` - описание товара.

### Класс `Gallery`

> Класс представляет собой коллекцию товаров, представленных экземплярами класс [`Product`](#класс-product).

Свойства:

- `items:`[`Product`](#класс-product)`[]` - коллекция товаров.

### Класс `Basket`

> Отвечает за хранение информации о товаров, выбранных пользователем.

Свойства:

- `id: string` - идентификатор заказа товаров;
- `total: number` - полная стоимость заказа;
- `items:`[`Gallery`](#класс-gallery)`[]` - коллекция товаров, включенных в заказ.

Функции:

- `addProduct(id: string): void` - добавление товара в заказ, где `id` уникальный идентификатор товара;
- `removeProduct(id: string): void` - удаляет товар из заказа, где `id` уникальный идентификатор товара;
- `clear(): void` - удаляет все товары из заказа.

### Класс `Order`

> Отвечает за оформление заказа. Наследуется от класса [`Basket`](#класс-basket), расширяет его функции и имплементирует интерфейсы [`IPaymentInfo`](#интерфейс-ipaymentinfo) и [`IContactInfo`](#интерфейс-icontactinfo).

Свойства:

- `payment: payment` - способ оплаты заказа, где тип `payment` является ограничением из двух значений: `outline` и `upon delivery`.

   ```typescript
   type payment = 'outline' | 'upon delivery';
   ```

- `email: string` - адрес электронной почты пользователя;
- `phone: string` - номер телефона пользователя;
- `address: string` - адрес доставки заказа.

Функции:

- `pay(): void` - подтверждение оплаты заказа.

### Интерфейс `IPaymentInfo`

> Объединяет способ оплаты товара и адрес электронной почты. Является первым шагом в оформлении заказа.

Свойства:

- `payment: payment` - способ оплаты заказа, где тип payment явзяется ограничением из двух значений: `outline` и `upon delivery`.

   ```typescript
   type payment = 'outline' | 'upon delivery';
   ```

- `email: string` - адрес электронной почты пользователя.

### Интерфейс `IContactInfo`

> Объединяет действие по вводу номера телефона и адреса доставки заказа. Является вторым шагом в оформлении заказа.

Свойства:

- `phone: string` - номер телефона пользователя;
- `address: string` - адрес доставки заказа.

## Класс `EventEmitter`

> Брокер событий — это класс, позволяющий объектам подписываться на определённые типы событий и получать уведомления о них.

Функции:

- `on(eventName, callback)` - подписывается на определённый тип событий;
- `off(eventName, callback)` - отписывается от определённого типа событий;
- `emit(eventName, data)` - отправляет событие определённого типа;
- `onAll(callback)` - подписывается на все события;
- `offAll()` - отписывается от всех событий;
- `trigger(eventName, context)` - создаёт коллбек-триггер, который генерирует событие при вызове.

## Класс `Api`

> Класс `API` — класс, который позволяет отправлять запросы к API.

Методы:

- `getUri(uri: string)` — отправляет GET-запрос к указанному URI;
- `postUri(uri: string, data: object, method: ApiPostMethods = 'POST')` — отправляет POST-запрос к указанному URI (возможными вариантами могут быть `POST`, `PUT` или `DELETE`);
- `handleResponse()` - обрабатывает ответ сервера и возвращает объект в формате JSON.
